---
import { Icon } from 'astro-icon/components';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Headline from '~/components/ui/Headline.astro';
import Button from '~/components/ui/Button.astro';
import type { Steps as Props } from '~/types';

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline,
  actions = await Astro.slots.render('actions'),
  items = [],
  isReversed = false,

  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
	<div class={`flex flex-col gap-12 md:gap-20 md:flex-row ${isReversed ? 'md:flex-row-reverse' : ''}`}>
		<div class={`w-full lg:w-2/3 gap-8 md:gap-12 ${isReversed ? 'lg:ml-16 md:ml-8 ml-0' : 'lg:mr-16 md:mr-8 mr-0'}`}>
			<Headline
				title={title}
				subtitle={subtitle}
				tagline={tagline}
				classes={{
					container: 'text-center md:text-left rtl:md:text-right mb-10 md:mb-16',
					title: 'text-3xl lg:text-5xl font-extrabold font-heading',
					subtitle: 'text-xl text-muted',
					// ...((classes?.headline as {}) ?? {}),
				}}
			/>

			{
				actions && (
					<div class="w-full text-center md:text-left rtl:md:text-right flex flex-nowrap flex-col sm:flex-row gap-4">
						{Array.isArray(actions) ? (
							actions.map((action) => (
								<div class="flex w-full sm:w-auto">
									<Button {...(action || {})} class="w-full sm:mb-0" />
								</div>
							))
						) : (
							<Fragment set:html={actions} />
						)}
					</div>
				)
			}
		</div>
		<div class="w-full flex items-center lg:w-1/3 px-0">
			<ul class="space-y-10">
				{
					items && items.length
						? items.map(({ title: title2, description, icon }, index) => (
							<li class="flex items-center md:-mx-4">
								<div class="pr-4 sm:pl-4 rtl:pr-0 rtl:pl-4 rtl:sm:pl-0 rtl:sm:pr-4">
									<span class="flex w-14 h-14 mx-auto items-center justify-center text-2xl font-bold rounded-full bg-primary text-light">
										{icon ? <Icon name={icon} class="w-6 h-6 icon-bold" /> : index + 1}
									</span>
								</div>
								<div class="pl-4 rtl:pl-0 rtl:pr-4 w-full">
									<h3 class="text-lg font-normal font-heading " set:html={title2} />
									<p class="text-lg font-semibold" set:html={description} />
								</div>
							</li>
						))
					: ''
				}
			</ul>
		</div>
	</div>
</WidgetWrapper>
